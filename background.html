<script>
chrome.contextMenus.create({
  "title": "Open frame in this tab",
  "onclick": function(clickData, tab) { openFrame(clickData, tab, "this-tab") }
});

chrome.contextMenus.create({
  "title": "Open frame in new tab",
  "onclick": function(clickData, tab) { openFrame(clickData, tab, "new-tab") }
});

chrome.contextMenus.create({
  "title": "Open frame in new window",
  "onclick": function(clickData, tab) { openFrame(clickData, tab, "window") }
});

chrome.contextMenus.create({
  "title": "Open frame in incognito window",
  "onclick": function(clickData, tab) { openFrame(clickData, tab, "incognito") }
});

function openFrame(clickData, tab, container) {
  var data = {url: clickData.frameUrl || clickData.pageUrl};

  switch (container) {
    case "this-tab":
      chrome.tabs.update(tab.id, data);
      break;
    case "new-tab":
      chrome.tabs.create(data);
      break;
    case "incognito":
      data.incognito = true;
      // nobreak
    case "window":
      chrome.windows.create(data);
      break;
  }
}
</script>
